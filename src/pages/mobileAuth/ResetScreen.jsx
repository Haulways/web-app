import * as React from 'react'
import { Link, useNavigate } from 'react-router-dom';
import { supabase } from '../../supabase/SupabaseConfig';
import { toast } from 'react-toastify';


const ResetScreen = () => {
  const [email, setEmail] = React.useState("");
  const [name, setName] = React.useState("");


  // Password Reset Authentication 
  const resetPassword = async (e) => {
    e.preventDefault();

    const { data, error } = await supabase.auth.resetPasswordForEmail(email, {
      redirectTo: 'https://haulway-demo-project.web.app/reset-page'
    });

    if (error) {
      toast.error(error.message);
    } else {
      toast.success("Check email for reset link.");
      setEmail("");
      setName("");
    }
  };



  const logo = (
    <svg xmlns="http://www.w3.org/2000/svg" width="221" height="88" viewBox="0 0 221 88" fill="none">
      <path d="M7.16916 59.9616C17.3738 59.8139 22.1021 45.1041 28.2578 32.7206C31.5587 32.2711 33.8096 31.8216 36.9629 31.1456C36.287 32.7206 22.4762 59.9616 34.2592 59.9616C40.7888 59.9616 47.0167 48.7069 49.2676 45.4782C49.4185 45.3305 49.4185 44.9532 49.1954 44.73C48.7426 44.2772 48.2176 44.5791 47.6171 45.4782C44.7657 49.6814 39.437 58.3111 34.4101 58.3111C29.0813 58.3111 36.661 40.5267 41.6879 30.3942C49.2676 28.5928 61.0506 22.4405 65.4802 16.4358C67.2062 14.0339 68.7812 11.0316 69.0043 8.10469C69.3816 3.82922 67.0552 0 63.0029 0C61.126 0 59.3246 0.60047 57.6741 1.57828C49.7926 6.52969 43.4138 16.6622 37.6356 29.6428C37.0351 29.7938 32.2346 30.8438 28.9304 31.2966C34.7842 18.6867 37.9374 11.783 38.0129 11.1825C38.0884 10.4311 37.186 9.00704 36.287 9.00704C35.611 9.00704 35.0106 9.98157 34.4856 10.5066C29.3832 16.6622 24.5795 23.3395 18.2762 22.516C17.9743 22.4405 17.4493 22.9655 17.6003 23.415C17.6757 24.091 18.1253 24.091 18.6503 24.091C23.0045 24.3174 27.0568 21.9155 31.4832 16.9608C30.2823 19.5891 25.029 30.9192 24.6549 31.8971C10.8442 34.5975 2.28995 41.6522 0.488539 49.2319C-1.01099 55.3088 0.865883 60.0371 7.16916 59.9616ZM42.3638 28.8947C45.8912 21.9155 48.1421 17.6367 51.9713 12.2325C54.6718 8.3311 59.551 2.55281 63.9774 2.55281C66.6779 2.55281 67.7312 5.03016 67.5048 7.88157C66.3793 18.0108 52.0468 25.9678 42.3638 28.8947ZM7.31682 58.3866C2.06682 58.613 0.865883 53.8093 2.06682 49.2319C3.86494 42.1772 12.7965 35.7985 24.1299 33.3211C17.5248 45.7046 14.447 58.088 7.31682 58.3866Z" fill="white" />
      <path d="M64.6483 59.9616C70.2756 59.9616 75.1549 53.3597 79.8831 45.4781C80.1063 45.1041 79.9586 44.5036 79.3581 44.5036C78.9808 44.5036 78.4558 45.1041 78.2327 45.4781C74.1049 52.3097 69.8261 58.3111 64.8714 58.3111C63.9724 58.3111 63.221 57.6352 63.221 56.5097C63.221 53.9602 65.3242 49.1564 66.8238 45.7045C68.1002 42.7777 72.077 34.2234 72.077 33.472C72.077 32.2711 71.3256 31.7461 70.3511 31.7461C68.927 31.7461 68.7006 32.0447 66.6728 35.572C64.7992 33.3966 63.1455 32.0447 60.8945 32.0447C53.8399 32.0447 45.2856 45.1041 45.2856 52.9823C45.2856 56.6606 46.713 59.7384 49.5644 59.7384C53.0163 59.7384 57.82 54.2588 60.3695 50.6559C60.071 52.0833 59.92 53.2842 59.92 54.4097C59.92 58.088 61.5705 59.9616 64.6483 59.9616ZM50.0139 57.937C48.8885 57.937 48.5866 57.1102 48.5866 55.8338C48.5866 49.5305 56.9177 35.1225 62.4728 35.1225C63.9724 35.1225 65.1733 36.3989 65.7738 37.5244C64.8714 39.4767 62.9224 43.3027 62.02 45.255C60.5205 49.0055 53.3149 57.937 50.0139 57.937Z" fill="white" />
      <path d="M92.262 59.9614C98.9426 59.9614 104.419 50.0553 107.572 45.4779C107.795 45.1038 107.72 44.802 107.346 44.5788C106.745 44.2015 106.145 45.1793 105.922 45.4779C102.693 50.0553 97.9648 58.3109 92.4129 58.3109C88.2096 58.3109 96.3143 43.0038 100.068 33.9968C100.442 33.0223 99.9171 32.4218 98.4898 32.1954C97.0657 31.969 96.3898 32.6449 95.7138 33.9968C93.6893 37.8982 92.0356 41.127 90.0865 45.4779C88.3606 49.3071 80.5545 57.9368 78.3035 57.9368C75.9017 57.9368 81.2304 47.3548 87.9077 34.2232C88.6591 32.7959 87.2351 32.3463 86.2573 32.2709C84.9841 32.1954 84.1573 33.0223 83.4813 34.1478C79.954 39.6242 69.9724 59.6628 78.3035 59.6628C81.2304 59.6628 85.7323 55.5349 88.0587 52.1585C87.1596 57.4118 88.8856 59.9614 92.262 59.9614Z" fill="white" />
      <path d="M107.119 59.8862C114.023 60.9395 120.326 49.4551 123.105 45.4783C123.404 45.0287 123.105 44.5792 122.728 44.5037C122.278 44.4283 121.98 44.7301 121.451 45.4783C118.977 49.0056 112.822 59.3612 107.493 58.2358C105.167 57.7108 108.32 49.8325 110.121 45.5537C113.048 38.4991 114.472 35.4245 116.425 32.1203C122.652 29.7939 129.408 22.8902 132.709 17.0364C136.01 11.2581 135.41 6.37891 131.358 6.37891C124.529 6.37891 109.819 34.0726 105.318 45.5537C102.916 51.7094 102.542 59.2136 107.119 59.8862ZM117.327 29.9448C120.552 23.5661 128.283 10.4312 131.659 9.75859C133.684 9.38125 132.785 13.8864 131.134 16.5869C128.959 20.1142 122.652 27.3166 117.327 29.9448Z" fill="white" />
      <path d="M161.076 44.5777C160.626 44.2758 160.177 44.6531 159.648 45.4767C155.747 51.6324 150.796 50.6545 149.444 49.3059C153.27 44.3513 163.704 27.1674 153.572 26.8655C145.093 26.6424 141.037 43.4522 146.819 49.68C145.765 51.3305 139.013 58.3097 135.859 58.3097C130.081 58.3097 139.088 39.6984 142.54 31.5938C142.99 30.5438 141.713 29.7169 140.44 29.7169C139.088 29.7169 138.488 30.6192 138.038 31.5938C136.686 34.4452 135.036 38.573 133.684 42.7763C133.31 43.5277 132.933 44.3513 132.483 45.4767C130.833 49.3059 124.979 57.9356 122.728 57.9356C119.2 57.9356 125.281 45.4013 131.282 31.5938C132.033 29.8678 130.232 29.1919 128.805 29.7924C128.132 30.0942 127.679 30.6947 127.23 31.4428C123.627 37.372 113.796 59.6616 122.728 59.6616C125.13 59.6616 128.208 56.2097 131.732 50.5791C130.983 55.7602 131.807 59.737 135.859 59.737C140.588 59.737 147.042 52.7578 148.318 50.9564C152.446 52.9055 157.322 52.1574 161.302 45.4767C161.525 45.1027 161.378 44.8008 161.076 44.5777ZM148.092 48.105C144.715 43.9772 149.217 28.9688 154.697 28.9688C158.451 28.9688 152.669 42.1758 148.092 48.105Z" fill="white" />
      <path d="M176.681 59.9616C182.309 59.9616 187.188 53.3597 191.916 45.4781C192.139 45.1041 191.992 44.5036 191.391 44.5036C191.014 44.5036 190.489 45.1041 190.266 45.4781C186.138 52.3097 181.859 58.3111 176.905 58.3111C176.006 58.3111 175.254 57.6352 175.254 56.5097C175.254 53.9602 177.357 49.1564 178.857 45.7045C180.133 42.7777 184.11 34.2234 184.11 33.472C184.11 32.2711 183.359 31.7461 182.384 31.7461C180.96 31.7461 180.734 32.0447 178.706 35.572C176.832 33.3966 175.179 32.0447 172.928 32.0447C165.873 32.0447 157.319 45.1041 157.319 52.9823C157.319 56.6606 158.746 59.7384 161.598 59.7384C165.049 59.7384 169.853 54.2588 172.403 50.6559C172.104 52.0833 171.953 53.2842 171.953 54.4097C171.953 58.088 173.604 59.9616 176.681 59.9616ZM162.047 57.937C160.922 57.937 160.62 57.1102 160.62 55.8338C160.62 49.5305 168.951 35.1225 174.506 35.1225C176.006 35.1225 177.206 36.3989 177.807 37.5244C176.905 39.4767 174.956 43.3027 174.053 45.255C172.554 49.0055 165.348 57.937 162.047 57.937Z" fill="white" />
      <path d="M220.657 44.5804C220.056 44.203 219.456 45.1808 218.704 46.2308C213.303 54.1091 209.7 58.4633 202.944 60.4879C205.497 55.2346 213.828 37.9752 215.252 35.2747C216.004 33.8474 216.378 32.2724 214.652 31.7474C212.775 31.1469 212.175 31.9705 210.524 35.2747C207.899 40.528 206.324 43.9044 203.397 50.0568C200.093 54.6374 196.792 58.3124 193.038 58.3124C190.187 58.3124 192.513 50.6572 194.541 45.7813C195.742 42.9299 200.319 34.9729 200.543 33.7719C200.693 32.571 199.719 32.2724 198.744 32.2724C198.216 32.2724 197.091 32.4988 196.566 33.2469C195.44 34.6743 193.265 37.6012 190.039 45.7813C187.411 52.311 187.335 59.9629 193.038 59.9629C195.742 59.9629 198.292 58.2369 200.844 55.5365L198.144 61.2393C184.185 64.0907 172.852 71.7458 172.852 80.8283C172.852 85.0283 176.228 87.1316 178.857 87.1316C191.463 87.1316 197.468 71.0699 201.97 62.5157C211.275 59.6643 215.177 54.26 220.355 46.3063C220.581 45.8568 221.408 45.0299 220.657 44.5804ZM178.857 85.4811C176.455 85.4811 174.503 83.3778 174.503 80.8283C174.503 75.3486 181.331 66.4925 197.166 63.3425C194.164 71.0699 188.31 85.4811 178.857 85.4811Z" fill="white" />
    </svg>
  );

  const whiteBg = (
    <svg className='w-[100vw]' xmlns="http://www.w3.org/2000/svg" width="430" height="874" viewBox="0 0 430 874" fill="none">
      <path d="M-31.6145 31.1025C-31.3968 2.36436 5.78241 -10.0479 24.39 11.8538C174.221 188.209 270.792 184.37 411.528 15.1525C430.108 -7.18798 468 5.22661 468 34.2838V844C468 860.569 454.569 874 438 874H-7.77189C-24.4293 874 -37.8972 860.43 -37.771 843.773L-31.6145 31.1025Z" fill="white" />
    </svg>
  );

  return (
    <div>
      <div className='bg-[#000] flex justify-center items-center py-[3rem] pb-[5rem]'>
        {logo}
      </div>
      <div className='z-[100] relative mt-[-13rem]'>
        {whiteBg}
        <div className='absolute top-[15rem] w-full'>
          <div className='mobile_sign_container relative'>
        
            <form onSubmit={resetPassword}>

              <input
                type='text'
                placeholder='Full Name'
                required
                value={name}
                onChange={(e) => setName(e.target.value)}
              />

              <input
                type='email'
                placeholder='Email Address'
                required
                value={email}
                onChange={(e) => setEmail(e.target.value)}
              />
              <div className=' mt-[6rem]'>
                <button type='submit'>Reset Password</button>
              </div>

              <div className='reset__links'>
                <Link to="/login">- Sign In</Link>
                <Link to="/signup">- Sign Up</Link>
              </div>

            </form>

           
          </div>
        </div>
      </div>
    </div>
  );
};

export default ResetScreen